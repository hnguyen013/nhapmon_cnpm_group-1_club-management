{% extends "portal/base_admin.html" %}
{% block title %}Sự kiện của CLB{% endblock %}
{% block menu_club_active %}active{% endblock %}

{% block content %}
  <div style="display:flex; align-items:flex-end; justify-content:space-between; gap:12px; flex-wrap:wrap;">
    <div>
      <h1 style="margin:0;">Sự kiện – {{ club.name }}</h1>
      <p style="margin:6px 0 0; color:#6b7280;">Quản lý sự kiện theo CLB (thêm/sửa/xoá).</p>
    </div>
    <div style="display:flex; gap:10px; flex-wrap:wrap;">
      <a class="btn btn-primary" href="{% url 'portal:admin_panel:club_event_create' club.id %}">+ Tạo sự kiện</a>
      <a class="btn btn-ghost" href="{% url 'portal:admin_panel:club_list' %}">↩ Quay lại danh sách CLB</a>
    </div>
  </div>

  <div style="margin-top:14px; background:#fff; border:1px solid #eef1f4; border-radius:14px; overflow:hidden;">
    <table style="width:100%; border-collapse:collapse;">
      <thead>
        <tr style="background:#f9fafb;">
          <th style="text-align:left; padding:12px; border-bottom:1px solid #eef1f4;">Tên sự kiện</th>
          <th style="text-align:left; padding:12px; border-bottom:1px solid #eef1f4;">Thời gian</th>
          <th style="text-align:left; padding:12px; border-bottom:1px solid #eef1f4;">Loại</th>
          <th style="text-align:right; padding:12px; border-bottom:1px solid #eef1f4;">Thao tác</th>
        </tr>
      </thead>
      <tbody>
        {% for e in events %}
        <tr>
          <td style="padding:12px; border-bottom:1px solid #f1f5f9;"><b>{{ e.title }}</b></td>
          <td style="padding:12px; border-bottom:1px solid #f1f5f9;">
            {% if e.event_date %}{{ e.event_date|date:"d/m/Y" }}{% else %}—{% endif %}
          </td>
          <td style="padding:12px; border-bottom:1px solid #f1f5f9;">{{ e.category|default:"—" }}</td>
          <td style="padding:12px; border-bottom:1px solid #f1f5f9; text-align:right;">
            <a class="btn btn-ghost" href="{% url 'portal:admin_panel:club_event_edit' club.id e.id %}">Sửa</a>
            <a class="btn btn-danger" href="{% url 'portal:admin_panel:club_event_delete' club.id e.id %}">Xoá</a>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="4" style="padding:14px;">CLB này chưa có sự kiện.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% endblock %}
