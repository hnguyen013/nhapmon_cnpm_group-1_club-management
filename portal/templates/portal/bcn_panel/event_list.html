{% extends "portal/base_home.html" %}
{% load static %}

{% block title %}Danh s√°ch s·ª± ki·ªán | BCN{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'portal/css/bcn_panel.css' %}">
<link rel="stylesheet" href="{% static 'portal/css/bcn.css' %}">
{% endblock %}

{% block content %}
<div class="bcn-wrap">
  <div style="display:flex; align-items:flex-end; justify-content:space-between; gap:12px; flex-wrap:wrap;">
    <div>
      <h1 style="margin:0 0 6px;">Danh s√°ch s·ª± ki·ªán</h1>
      <div style="color:#6b7280;">
        CLB: <b>{{ club.name }}</b> ‚Ä¢ T·ªïng: <b>{{ total_events }}</b>
      </div>
    </div>

    <div style="display:flex; gap:10px; align-items:center;">
      <a class="btn-primary" href="{% url 'portal:bcn_panel:event_create' %}">+ T·∫°o s·ª± ki·ªán</a>
      <a class="btn-secondary" href="{% url 'portal:bcn_panel:dashboard' %}">Quay l·∫°i</a>
    </div>
  </div>

  <div style="margin-top:14px;">
    {% if events %}
      <table class="bcn-table" style="width:100%;">
        <thead>
          <tr>
            <th>#</th>
            <th>T√™n s·ª± ki·ªán</th>
            <th>CLB t·ªï ch·ª©c</th>
            <th>Th·ªùi gian</th>
            <th>Tr·∫°ng th√°i</th>
            <th style="text-align:right;">Thao t√°c</th>
          </tr>
        </thead>
        <tbody>
          {% for e in events %}
            <tr style="{% if e.is_cancelled %}opacity:.65;{% endif %}">
              <td>{{ forloop.counter }}</td>
              <td><b>{{ e.title }}</b></td>
              <td>{{ e.club_name }}</td>
              <td>
                {% if e.event_date %}
                  {{ e.event_date|date:"d/m/Y" }}
                {% else %}
                  ‚Äî
                {% endif %}
              </td>
              <td>{{ e.status }}</td>

              <td style="text-align:right; white-space:nowrap;">
                {% if e.is_cancelled %}
                  <span style="color:#6b7280; font-weight:700;">ƒê√£ hu·ª∑</span>
                {% else %}
                  <a class="btn-secondary"
                     href="{% url 'portal:bcn_panel:event_edit' e.id %}">
                    S·ª≠a
                  </a>

                  <a class="btn-secondary"
                     href="{% url 'portal:bcn_panel:event_cancel_confirm' e.id %}">
                    Hu·ª∑
                  </a>
                {% endif %}
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    {% else %}
      <div class="empty" style="margin-top:14px;">
        <div class="empty__icon">üìÖ</div>
        <h3>Ch∆∞a c√≥ s·ª± ki·ªán n√†o</h3>
        <p>H√£y b·∫•m <b>‚Äú+ T·∫°o s·ª± ki·ªán‚Äù</b> ƒë·ªÉ th√™m m·ªõi.</p>
      </div>
    {% endif %}
  </div>
</div>
{% endblock %}
